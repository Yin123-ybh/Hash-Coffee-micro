# 跨域问题修复说明

## ❌ 问题描述

前端访问后端时出现跨域错误，导致登录失败。

## ✅ 已修复

### 1. 添加跨域配置

创建了 `CorsConfig.java` 配置文件，支持：
- ✅ 允许所有来源的跨域请求
- ✅ 允许所有请求头
- ✅ 允许所有请求方法
- ✅ 支持携带凭证

### 2. 更新认证过滤器

修改了 `AuthGlobalFilter.java`：
- ✅ 跳过 OPTIONS 预检请求
- ✅ 添加 `/admin/login` 到白名单

## 🔄 重启服务

由于修改了网关配置，需要重启网关服务：

```bash
# 停止当前运行的网关
lsof -ti:8089 | xargs kill

# 重新启动网关
cd coffee-microservices/coffee-gateway
mvn spring-boot:run
```

或者重启所有服务：

```bash
cd coffee-microservices
./stop-services.sh
./start-services.sh
```

## 🎯 测试

重启后，前端应该可以正常访问后端接口：

1. 访问：http://localhost:8091
2. 登录：admin / 123456
3. 应该可以成功登录

## 📝 注意

如果还有问题，请检查：
1. 网关服务是否正常运行在 8089 端口
2. 前端服务是否正常运行在 8091 端口
3. 浏览器控制台是否有其他错误信息
